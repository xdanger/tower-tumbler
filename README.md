# ğŸ—ï¸ Tower Tumbler

<div align="center">
  <strong>åŸºäºç‰©ç†çš„å †å æ¸¸æˆï¼Œä½¿ç”¨è®¾å¤‡å€¾æ–œæ§åˆ¶</strong>
  <br />
  <br />

[![Build Status](https://github.com/xdanger/tower-tumbler/workflows/CI/badge.svg)](https://github.com/xdanger/tower-tumbler/actions)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Bevy](https://img.shields.io/badge/bevy-0.14-green.svg)](https://bevyengine.org)
[![WASM](https://img.shields.io/badge/platform-wasm-orange.svg)](https://webassembly.org)

</div>

## ğŸ“‹ ç”¨é€”

Tower Tumbler æ˜¯ä¸€ä¸ªåŸºäº Rust å’Œ Bevy å¼•æ“å¼€å‘çš„ç‰©ç†å †å æ¸¸æˆã€‚ç©å®¶éœ€è¦é€šè¿‡å€¾æ–œè®¾å¤‡æ¥æ§åˆ¶è½ä¸‹çš„æ–¹å—ï¼Œç²¾å‡†åœ°å°†å®ƒä»¬å åŠ åœ¨ä¸€èµ·ï¼Œå½¢æˆç¨³å®šè€Œé«˜è€¸çš„å¡”æ¥¼ã€‚æ¸¸æˆç‰¹è‰²åŒ…æ‹¬çœŸå®çš„ç‰©ç†æ¨¡æ‹Ÿã€ç›´è§‚çš„å€¾æ–œæ§åˆ¶å’Œå®Œç¾å åŠ å¥–åŠ±æœºåˆ¶ã€‚

## ğŸ® æ¸¸æˆç‰¹è‰²

- **å€¾æ–œæ§åˆ¶**ï¼šä½¿ç”¨è®¾å¤‡é™€èºä»ªè¿›è¡Œç›´è§‚æ§åˆ¶
- **ç‰©ç†æ¨¡æ‹Ÿ**ï¼šåŸºäº Rapier2D çš„çœŸå®ç‰©ç†æ•ˆæœ
- **å®Œç¾å åŠ **ï¼šç²¾å‡†æ“ä½œè·å¾—é¢å¤–åˆ†æ•°
- **è·¨å¹³å°**ï¼šæ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯æµè§ˆå™¨

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### ç¯å¢ƒé…ç½®

ç¡®ä¿ç³»ç»Ÿå·²å®‰è£…ä»¥ä¸‹ä¾èµ–ï¼š

- Rust 1.75+ (with cargo)
- Node.js 18+ (for tooling)
- wasm-pack 0.12+
- Trunk 0.17+

### å®‰è£…/åˆå§‹åŒ–

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/xdanger/tower-tumbler.git
cd tower-tumbler

# å®‰è£… Rust å·¥å…·é“¾
rustup target add wasm32-unknown-unknown

# å®‰è£…æ„å»ºå·¥å…·
cargo install trunk wasm-bindgen-cli
```

### ç¼–è¯‘/æ„å»ºæ­¥éª¤

#### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰
trunk serve --open

# æˆ–è€…æŒ‡å®šç«¯å£
trunk serve --port 8080 --open
```

#### å‘å¸ƒæ„å»º

```bash
# æ„å»ºä¼˜åŒ–ç‰ˆæœ¬
trunk build --release

# æˆ–ä½¿ç”¨æ„å»ºè„šæœ¬
./scripts/build-release.sh
```

### å¦‚ä½•ä½¿ç”¨è¯¥ç»„ä»¶

#### åŸºç¡€æ¸¸æˆæ“ä½œ

1. **ç§»åŠ¨ç«¯**ï¼šå€¾æ–œè®¾å¤‡å·¦å³æ¥æ§åˆ¶æ–¹å—è½ä¸‹æ–¹å‘
2. **æ¡Œé¢ç«¯**ï¼šä½¿ç”¨å·¦å³ç®­å¤´é”®æˆ– A/D é”®æ§åˆ¶
3. **ç›®æ ‡**ï¼šå°†æ–¹å—ç²¾å‡†å åŠ ï¼Œå½¢æˆç¨³å®šçš„å¡”æ¥¼
4. **å¾—åˆ†**ï¼šå®Œç¾å åŠ è·å¾—é¢å¤–åˆ†æ•°

#### é›†æˆåˆ°å…¶ä»–é¡¹ç›®

```rust
use tower_tumbler::prelude::*;

fn main() {
    App::new()
        .add_plugins(DefaultPlugins)
        .add_plugins(TowerTumblerPlugin)
        .run();
}
```

### æµ‹è¯•æµç¨‹

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cargo test

# è¿è¡Œ WASM æµ‹è¯•
wasm-pack test --headless --firefox

# ç«¯åˆ°ç«¯æµ‹è¯•
npm run test:e2e

# æ€§èƒ½æµ‹è¯•
cargo bench
```

### è°ƒè¯•å’Œæ—¥å¿—

é¡¹ç›®å†…ç½®äº†å®Œæ•´çš„æ—¥å¿—ç³»ç»Ÿï¼Œç”¨äºå¼€å‘å’Œè°ƒè¯•ï¼š

#### å¯åŠ¨å¼€å‘ç¯å¢ƒï¼ˆå¸¦æ—¥å¿—ï¼‰

```bash
# å¯åŠ¨æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—æœåŠ¡å™¨
cd utils && ./start-log-server.sh

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
cd utils && ./start-trunk-server.sh

# è®¿é—® http://localhost:8080
```

#### æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

```bash
# æµè§ˆå™¨æ§åˆ¶å°æ—¥å¿—
tail -f logs/browser/console-$(date +%Y-%m-%d).log

# æœåŠ¡å™¨æ—¥å¿—
tail -f logs/server/trunk-$(date +%Y-%m-%d).log
```

æ›´å¤šè°ƒè¯•å·¥å…·ä¿¡æ¯è¯·å‚è€ƒ [utils/README.md](utils/README.md)ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **[Bevy](https://bevyengine.org)** 0.14 - Rust æ¸¸æˆå¼•æ“
- **[Rapier2D](https://rapier.rs)** - ç‰©ç†å¼•æ“
- **[wasm-bindgen](https://github.com/rustwasm/wasm-bindgen)** - WASM ç»‘å®š
- **[Trunk](https://trunkrs.dev)** - WASM åº”ç”¨æ‰“åŒ…å·¥å…·

### é¡¹ç›®ç»“æ„

```
tower-tumbler/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ core/          # æ ¸å¿ƒæ¸¸æˆé€»è¾‘
â”‚   â”‚   â”œâ”€â”€ game.rs    # æ¸¸æˆçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ scoring.rs # è®¡åˆ†ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ input/         # è¾“å…¥å¤„ç†ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ tilt.rs    # å€¾æ–œæ£€æµ‹
â”‚   â”‚   â”œâ”€â”€ keyboard.rs # é”®ç›˜è¾“å…¥
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ physics/       # ç‰©ç†å¼•æ“é›†æˆ
â”‚   â”‚   â”œâ”€â”€ world.rs   # ç‰©ç†ä¸–ç•Œè®¾ç½®
â”‚   â”‚   â”œâ”€â”€ bodies.rs  # åˆšä½“ç®¡ç†
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ ui/            # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hud.rs     # æŠ¬å¤´æ˜¾ç¤º
â”‚   â”‚   â”œâ”€â”€ menu.rs    # èœå•ç³»ç»Ÿ
â”‚   â”‚   â””â”€â”€ mod.rs
â”‚   â”œâ”€â”€ lib.rs         # åº“å…¥å£
â”‚   â””â”€â”€ main.rs        # å¯æ‰§è¡Œå…¥å£
â”œâ”€â”€ assets/            # æ¸¸æˆèµ„æº
â”‚   â”œâ”€â”€ sprites/       # ç²¾çµå›¾åƒ
â”‚   â”œâ”€â”€ sounds/        # éŸ³æ•ˆæ–‡ä»¶
â”‚   â””â”€â”€ fonts/         # å­—ä½“æ–‡ä»¶
â”œâ”€â”€ scripts/           # æ„å»ºå’Œå·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ build-release.sh
â”‚   â”œâ”€â”€ optimize-wasm.sh
â”‚   â””â”€â”€ deploy.sh
â”œâ”€â”€ docs/              # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ AI_DEVELOPMENT_GUIDE.md # AI å¼€å‘è¯¦ç»†æŒ‡å—
â”‚   â”œâ”€â”€ BEVY_COMPATIBILITY.md   # Bevy å…¼å®¹æ€§æ–‡æ¡£
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md      # å¿«é€Ÿå‚è€ƒ
â”‚   â””â”€â”€ api/           # API æ–‡æ¡£
â”œâ”€â”€ AGENT.md           # AI åŠ©æ‰‹é¡¹ç›®å¯¼èˆª
â”œâ”€â”€ tests/             # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ e2e/
â””â”€â”€ Cargo.toml         # Rust åŒ…é…ç½®
```

## ğŸ“± è®¾å¤‡å…¼å®¹æ€§

| å¹³å°            | å€¾æ–œæ§åˆ¶      | åå¤‡æ§åˆ¶ | æµ‹è¯•çŠ¶æ€ |
| --------------- | ------------- | -------- | -------- |
| iOS Safari      | âœ… (éœ€è¦æƒé™) | âœ…       | âœ…       |
| Android Chrome  | âœ…            | âœ…       | âœ…       |
| Desktop Chrome  | âŒ            | âœ…       | âœ…       |
| Desktop Firefox | âŒ            | âœ…       | âœ…       |
| Desktop Safari  | âŒ            | âœ…       | ğŸ”„       |

## ğŸ“‹ è·¯çº¿å›¾

### âœ… å·²å®Œæˆ

- [x] åŸºç¡€ç‰©ç†å’Œæ¸²æŸ“ç³»ç»Ÿ
- [x] è®¾å¤‡å€¾æ–œè¾“å…¥æ”¯æŒ
- [x] åŸºç¡€å¾—åˆ†ç³»ç»Ÿ
- [x] å®Œç¾å åŠ æœºåˆ¶
- [x] WASM æ„å»ºä¼˜åŒ–

### ğŸ”„ è¿›è¡Œä¸­

- [ ] éŸ³æ•ˆå’ŒéŸ³ä¹ç³»ç»Ÿ
- [ ] å¤šç§æ¸¸æˆæ¨¡å¼
- [ ] ç§»åŠ¨ç«¯ UI ä¼˜åŒ–

### â³ è®¡åˆ’ä¸­

- [ ] æ’è¡Œæ¦œç³»ç»Ÿ
- [ ] å¤šäººå¯¹æˆ˜æ¨¡å¼
- [ ] æˆå°±ç³»ç»Ÿ
- [ ] è‡ªå®šä¹‰ä¸»é¢˜
- [ ] æ¸¸æˆå›æ”¾åŠŸèƒ½

### ğŸ” å®¡æ ¸ä¸­

- [ ] æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ
- [ ] æ— éšœç¢åŠŸèƒ½

### âŒ å·²é˜»å¡

- [ ] PWA ç¦»çº¿æ”¯æŒï¼ˆç­‰å¾… Bevy WASM æ”¹è¿›ï¼‰

## ğŸ“ ä¸‹ä¸€æ­¥è¡ŒåŠ¨é¡¹

### é«˜ä¼˜å…ˆçº§

1. **éŸ³æ•ˆé›†æˆ** - ä½¿ç”¨ Web Audio API é€šè¿‡ wasm-bindgen
2. **UI/UX æ”¹è¿›** - å“åº”å¼è®¾è®¡å’Œç§»åŠ¨ç«¯ä½“éªŒ
3. **æ€§èƒ½ä¼˜åŒ–** - å‡å°‘ WASM åŒ…å¤§å°åˆ° < 2MB

### ä¸­ä¼˜å…ˆçº§

4. **æµ‹è¯•è¦†ç›–** - å¢åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
5. **æ–‡æ¡£å®Œå–„** - API æ–‡æ¡£å’Œå¼€å‘è€…æŒ‡å—
6. **CI/CD æµç¨‹** - è‡ªåŠ¨åŒ–æµ‹è¯•å’Œéƒ¨ç½²

### ä½ä¼˜å…ˆçº§

7. **å¤šè¯­è¨€æ”¯æŒ** - å›½é™…åŒ–æ¡†æ¶
8. **é«˜çº§åŠŸèƒ½** - ç‰¹æ®Šæ–¹å—ç±»å‹å’Œæ•ˆæœ

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£è¯¦æƒ…ã€‚

### AI è¾…åŠ©å¼€å‘

æœ¬é¡¹ç›®æ”¯æŒ AI è¾…åŠ©å¼€å‘ï¼Œè¯¦è§ [AGENT.md](AGENT.md)ã€‚

## ğŸ“š ç›¸å…³èµ„æº

- [Bevy å®˜æ–¹æ–‡æ¡£](https://bevyengine.org/learn/)
- [Rapier2D ç”¨æˆ·æŒ‡å—](https://rapier.rs/docs/)
- [WASM æœ€ä½³å®è·µ](https://rustwasm.github.io/docs/book/)
- [é¡¹ç›® Wiki](https://github.com/xdanger/tower-tumbler/wiki)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [Bevy](https://bevyengine.org) ç¤¾åŒºæä¾›çš„ä¼˜ç§€æ¸¸æˆå¼•æ“
- [Rapier](https://rapier.rs) å›¢é˜Ÿçš„ç‰©ç†å¼•æ“
- æ‰€æœ‰è´¡çŒ®è€…å’Œæµ‹è¯•ç”¨æˆ·çš„æ”¯æŒ
